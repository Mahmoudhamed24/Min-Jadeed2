# نموذج بيانات Google Sheets لمنصة Min Jadeed

هذا المستند يشرح نموذج البيانات المطلوب في Google Sheets لتشغيل منصة Min Jadeed. يجب إنشاء جداول Google Sheets التالية وربطها بالموقع عبر Google Apps Script.

## 1. هيكل الجداول

يجب إنشاء ملف Google Sheets واحد يحتوي على الأوراق (Sheets) التالية:

### 1.1 جدول المستخدمين (Users)

يخزن بيانات المستخدمين المسجلين في المنصة.

| العمود | النوع | الوصف |
|-------|------|-------|
| id | نص | معرف فريد للمستخدم (UUID) |
| email | نص | البريد الإلكتروني للمستخدم (مفتاح فريد) |
| password | نص | كلمة المرور المشفرة |
| username | نص | اسم المستخدم |
| fullName | نص | الاسم الكامل للمستخدم |
| bio | نص | نبذة عن المستخدم |
| avatar | نص | رابط URL لصورة المستخدم |
| favoriteCategories | نص | الفئات المفضلة (مفصولة بفواصل) |
| createdAt | تاريخ | تاريخ إنشاء الحساب |
| updatedAt | تاريخ | تاريخ آخر تحديث للحساب |

### 1.2 جدول الاقتباسات (Quotes)

يخزن جميع الاقتباسات المنشورة في المنصة.

| العمود | النوع | الوصف |
|-------|------|-------|
| id | نص | معرف فريد للاقتباس (UUID) |
| title | نص | عنوان الاقتباس |
| text | نص | نص الاقتباس |
| category | نص | فئة الاقتباس |
| authorEmail | نص | البريد الإلكتروني لمؤلف الاقتباس |
| authorName | نص | اسم مؤلف الاقتباس |
| authorAvatar | نص | رابط URL لصورة المؤلف |
| createdAt | تاريخ | تاريخ نشر الاقتباس |
| updatedAt | تاريخ | تاريخ آخر تحديث للاقتباس |

### 1.3 جدول التعليقات (Comments)

يخزن التعليقات على الاقتباسات.

| العمود | النوع | الوصف |
|-------|------|-------|
| id | نص | معرف فريد للتعليق (UUID) |
| quoteId | نص | معرف الاقتباس المرتبط بالتعليق |
| userEmail | نص | البريد الإلكتروني للمستخدم الذي أضاف التعليق |
| userName | نص | اسم المستخدم الذي أضاف التعليق |
| userAvatar | نص | رابط URL لصورة المستخدم |
| text | نص | نص التعليق |
| createdAt | تاريخ | تاريخ إضافة التعليق |

### 1.4 جدول التقييمات (Ratings)

يخزن تقييمات المستخدمين للاقتباسات.

| العمود | النوع | الوصف |
|-------|------|-------|
| id | نص | معرف فريد للتقييم (UUID) |
| quoteId | نص | معرف الاقتباس المرتبط بالتقييم |
| userEmail | نص | البريد الإلكتروني للمستخدم الذي أضاف التقييم |
| rating | رقم | قيمة التقييم (1-5) |
| createdAt | تاريخ | تاريخ إضافة التقييم |
| updatedAt | تاريخ | تاريخ آخر تحديث للتقييم |

## 2. العلاقات بين الجداول

- **المستخدمون والاقتباسات**: علاقة واحد إلى متعدد (مستخدم واحد يمكنه نشر عدة اقتباسات)
- **المستخدمون والتعليقات**: علاقة واحد إلى متعدد (مستخدم واحد يمكنه إضافة عدة تعليقات)
- **المستخدمون والتقييمات**: علاقة واحد إلى متعدد (مستخدم واحد يمكنه إضافة عدة تقييمات)
- **الاقتباسات والتعليقات**: علاقة واحد إلى متعدد (اقتباس واحد يمكن أن يحتوي على عدة تعليقات)
- **الاقتباسات والتقييمات**: علاقة واحد إلى متعدد (اقتباس واحد يمكن أن يحتوي على عدة تقييمات)

## 3. إعداد Google Sheets

1. قم بإنشاء ملف Google Sheets جديد
2. أنشئ 4 أوراق (Sheets) بالأسماء التالية:
   - Users
   - Quotes
   - Comments
   - Ratings
3. أضف الأعمدة المذكورة أعلاه لكل ورقة
4. أضف صف عنوان في الأعلى لكل ورقة يحتوي على أسماء الأعمدة

## 4. ملاحظات هامة

- يجب استخدام معرفات فريدة (UUID) لجميع السجلات
- يجب تشفير كلمات المرور قبل تخزينها
- يجب تخزين التواريخ بتنسيق ISO (YYYY-MM-DD HH:MM:SS)
- يجب حساب متوسط التقييمات ديناميكياً عند استرجاع الاقتباسات

## 5. خطوات التنفيذ

1. إنشاء ملف Google Sheets بالهيكل المذكور أعلاه
2. إنشاء مشروع Google Apps Script مرتبط بملف Google Sheets
3. كتابة وظائف Google Apps Script للتعامل مع البيانات
4. نشر Google Apps Script كواجهة برمجية تطبيقات ويب
5. ربط الموقع بالواجهة البرمجية عبر وظائف AJAX
